# รายงานโปรเจกต์การตรวจจับคนและกล่อง YOLOv11 + DeepSORT

## ข้อมูลโปรเจกต์

**หัวข้อโปรเจกต์:** การพัฒนาระบบตรวจจับและติดตามคนและกล่องด้วย YOLOv11 และ DeepSORT

---

## สรุปการดำเนินงาน

### การพัฒนา Dataset และการ Training ขั้นแรก

เริ่มต้นด้วยการสร้าง dataset จำนวน 24 ภาพด้วย Dreamania AI และนำไปแยกในระบบ Roboflow พร้อมกับการทำ manual bounding box อย่างละเอียด ผลลัพธ์จากการ training ครั้งแรกพบว่าโมเดลสามารถตรวจจับ "คน" ได้ค่อนข้างดี แต่การตรวจจับ "กล่อง" ยังไม่เป็นที่น่าพอใจเนื่องจาก dataset มีขนาดเล็กเกินไป

### การขยาย Dataset และปรับปรุงโมเดล

เพื่อแก้ไขปัญหาดังกล่าว ผมจึงขยาย dataset เป็น 200 ภาพและใช้การทำ manual annotation อย่างพิถีพิถัน ซึ่งใช้เวลาค่อนข้างมากในการทำ bounding box ด้วยมือ หลังจากการ training รอบที่สองแล้ว ผลลัพธ์ยังไม่เป็นไปตามความคาดหวัง

### การขยาย Dataset ขนาดใหญ่

ตัดสินใจขยาย dataset เป็น 500 ภาพด้วย Dreamania และแบ่งงาน manual annotation ออกเป็นหลายช่วง ในรอบนี้ทำการ training 45 epochs พร้อมกับศึกษาค่าพารามิเตอร์ bbox เพื่อเพิ่มประสิทธิภาพและลดระยะเวลาการ training

### การรวม Dataset และการปรับปรุงครั้งสุดท้าย

นำข้อมูลกล่องและคนจากแหล่งต่างๆ มารวมกัน แต่พบว่าการตรวจจับกล่องยังไม่แม่นยำเท่าที่ควรเนื่องจากความแตกต่างระหว่างภาพ AI-generated กับกล่องในสถานการณ์จริง อย่างไรก็ตาม การตรวจจับคนได้ผลดีมาก ดำเนินการ training ขั้นสุดท้ายด้วย 100 epochs เพื่อเพิ่มความแม่นยำของโมเดล

### การประเมินผลและการเชื่อมต่อระบบ

ทำการประเมินประสิทธิภาพของโมเดลและ export เพื่อนำไปใช้งาน จากนั้นเชื่อมต่อโมเดลเข้ากับระบบ DeepSORT สำหรับการติดตามวัตถุ ซึ่งสามารถทำงานได้เป็นที่น่าพอใจ

---

## ปัญหาที่พบและแนวทางแก้ไข

### ด้านคุณภาพของ Dataset

ภาพที่สร้างจาก Dreamania AI มีความแตกต่างจากสถานการณ์จริงค่อนข้างมาก ส่งผลให้การตรวจจับกล่องไม่แม่นยำเท่าที่ควร ในอนาคตควรลดการพึ่งพา AI-generated data และหันมาใช้ภาพจากสถานการณ์จริงมากขึ้น

### ด้านการ Annotation

การทำ bounding box ด้วยมือใช้ระยะเวลาค่อนข้างมาก โดยเฉพาะเมื่อ dataset มีขนาดใหญ่ขึ้น แนวทางแก้ไขคือการใช้ semi-automatic annotation เพื่อลดระยะเวลาแต่ยังคงคุณภาพ

### ด้านประสิทธิภาพการ Training

โมเดลในช่วงแรกให้ผลลัพธ์ไม่เป็นที่น่าพอใจ ต้องปรับปรุงหลายรอบกรดึงประสิทธิภาพ สิ่งที่เรียนรู้คือการ training แบบ iterative จะให้ผลดีกว่าการ training ครั้งเดียว

### ด้านความสมดุลของ Classes

การตรวจจับ "คน" ได้ผลดีกว่า "กล่อง" อย่างชัดเจน ซึ่งอาจเนื่องมาจากคุณภาพข้อมูลที่ไม่สมดุลกัน ต้องปรับปรุงคุณภาพข้อมูลในคลาส "กล่อง" ให้มากขึ้น

---

## การตั้งสมมติฐานและการพิสูจน์

### สมมติฐานที่ทดสอบ

1. การเพิ่มขนาด Dataset จะเพิ่มความแม่นยำของโมเดล
2. AI-generated images มีคุณภาพไม่เท่าภาพจริงสำหรับการ training
3. Manual annotation ที่ทำอย่างพิถีพิถันจะให้ผลลัพธ์ที่แม่นยำกว่า
4. การเทรนจำนวนครั้งมากขึ้น (100 epochs) จะให้ผลดีกว่า (45 epochs)

### ผลการพิสูจน์

ผลการทดลองแสดงให้เห็นว่าการเพิ่ม dataset จาก 24 เป็น 200 และ 500 ภาพทำให้ความแม่นยำเพิ่มขึ้น แต่ไม่เป็นไปตามสัดส่วนเนื่องจากคุณภาพข้อมูล เมื่อรวม dataset จากแหล่งอื่นที่เป็นภาพจริง การตรวจจับคนดีขึ้นอย่างชัดเจน Manual annotation แม้จะใช้เวลามากแต่ให้ผลลัพธ์ที่แม่นยำกว่า auto-annotation และการ training 100 epochs ให้ผลดีกว่า 45 epochs แต่ต้องระวัง overfitting

### การนำไปประยุกต์ใช้

จากผลการทดลอง ควรลดการพึ่งพา AI-generated data และหาภาพจริงมาใช้ รวมถึงการใช้ semi-automatic annotation เพื่อลดเวลาแต่คงคุณภาพ และการกำหนด optimal epochs ตาม dataset size เพื่อป้องกัน overfitting

---

## บทเรียนที่ได้รับ

### ความรู้ที่ได้รับ

สิ่งสำคัญที่เรียนรู้คือ "คุณภาพ Dataset มีความสำคัญมากกว่าปริมาณ Dataset" การมีภาพที่คุณภาพดี 200 ภาพจะให้ผลดีกว่าภาพ AI-generated 500 ภาพ นอกจากนี้ Manual annotation ต้องวางแผนล่วงหน้าเนื่องจากใช้เวลามาก และการ training แบบ iterative พร้อมปรับปรุงแต่ละครั้งจะให้ผลดีกว่าการ training ครั้งเดียว

### การจัดการ Class Imbalance

พบว่าการตรวจจับคนได้ผลดีกว่ากล่องเนื่องจากข้อมูลไม่สมดุล ซึ่งต้องคำนึงถึงในโปรเจกต์ต่อไป

### การประยุกต์ใช้ในอนาคต

หลักการที่ได้จากโปรเจกต์นี้สามารถนำไปใช้กับงานอื่นได้ เช่น การใช้หลักการ iterative improvement และ quality over quantity รวมถึงการใช้ confusion matrix และ class-specific metrics แทนการดูผลรวม

---

## ลักษณะเฉพาะของ Dataset

### คลาส "คน" (Person Class)

Dataset ครอบคลุมคนในท่าทางการทำงานต่างๆ เช่น การยกของ การเข็น การจับวัตถุ รวมถึงคนที่กำลังเดินหรือยืนในพื้นที่ทำงาน มีการรวบรวมภาพคนในชุดทำงานและเสื้อผ้าหลากหลาย พร้อมทั้งครอบคลุมหลายขนาดและมุมมอง ทั้งมุมสูง มุมระดับ และมุมข้าง

### คลาส "กล่อง" (Box Class)

รวบรวมภาพกล่องลังขนาดต่างๆ ตั้งแต่เล็ก กลาง ไปจนถึงใหญ่ มีสีสันหลากหลาย เช่น น้ำตาล ขาว และสีอื่นๆ ครอบคลุมสภาพต่างๆ ทั้งกล่องใหม่ เก่า และมีฉลาก รวมถึงตำแหน่งที่แตกต่างกัน เช่น บนพื้น บนชั้น หรือในมือคน

### ความหลากหลายของสภาพแวดล้อม

Dataset ครอบคลุมสถานที่หลากหลาย เช่น โกดัง คลังสินค้า และพื้นที่ขนส่ง พร้อมทั้งสภาพแสงที่แตกต่างกัน ทั้งแสงธรรมชาติ แสงไฟ และเงาต่างๆ รวมถึงพื้นผิวหลากหลาย เช่น คอนกรีต กระเบื้อง และพื้นอุตสาหกรรม

---

## กระบวนการสร้าง Dataset

### การสร้างภาพ

ใช้ Dreamania สร้างภาพตามสถานการณ์ที่กำหนดไว้ล่วงหน้า โดยเลือก prompt ที่เหมาะสมกับสภาพแวดล้อมคลังสินค้า และจัดหมวดหมู่ภาพตามลักษณะการใช้งานเพื่อความเป็นระเบียบ

### การ Annotation

ใช้ระบบ Roboflow สำหรับการ labeling โดยทำ manual bounding box เพื่อความแม่นยำสูงสุด และตรวจสอบคุณภาพ annotation ทุกรายการก่อนนำไปใช้

### การรวมและปรับปรุง

รวม dataset จากแหล่งต่างๆ เข้าด้วยกัน ปรับปรุงคุณภาพ label ให้สอดคล้องกัน และแบ่ง Train/Validation/Test sets อย่างเหมาะสม

---

## วัตถุประสงค์และการประยุกต์ใช้

### เป้าหมายหลัก

โปรเจกต์นี้มีจุดประสงค์เพื่อการตรวจจับคนและกล่องในสภาพแวดล้อมการขนส่งและโลจิสติกส์อย่างแม่นยำ

### การใช้งานจริง

ระบบสามารถใช้สำหรับ Object Detection เพื่อระบุตำแหน่งของคนและกล่องในเฟรมภาพ Object Tracking เพื่อติดตามการเคลื่อนไหวของวัตถุด้วย DeepSORT และ Monitoring System เพื่อตรวจสอบกิจกรรมในพื้นที่ทำงานแบบอัตโนมัติ นอกจากนี้ยังสามารถใช้สำหรับ Data Collection เพื่อเก็บข้อมูลและวิเคราะห์ประสิทธิภาพการทำงาน

---

## ผลลัพธ์ที่ได้รับ

โปรเจกต์ประสบความสำเร็จในการพัฒนาโมเดล YOLOv11 ที่สามารถตรวจจับคนได้ดีมาก แม้ว่าการตรวจจับกล่องยังต้องปรับปรุงเพิ่มเติม การเชื่อมต่อกับระบบ DeepSORT สำเร็จลุล่วงและสามารถทำงานได้ตามที่คาดหวัง มี dataset รวมมากกว่า 724 ภาพพร้อม annotation คุณภาพสูง และได้รับประสบการณ์อันมีค่าเกี่ยวกับการปรับปรุง training parameters และการจัดการ dataset

---

## แผนการพัฒนาต่อไป

### การปรับปรุงคุณภาพ Dataset

วางแผนหาข้อมูลภาพจริงจากสถานการณ์การขนส่งจริงมาเพิ่มเติม ลดการพึ่งพา AI-generated images และปรับปรุงคุณภาพ annotation ให้สม่ำเสมอมากขึ้น

### การเพิ่มประสิทธิภาพโมเดล

ปรับสมดุลระหว่างการตรวจจับคนและกล่องให้ดีขึ้น ทดสอบ hyperparameters ต่างๆ เพื่อหาค่าที่เหมาะสมที่สุด และพิจารณาเพิ่มจำนวน epochs หรือปรับ learning rate

### การทดสอบในสถานการณ์จริง

วางแผนทดสอบโมเดลกับวิดีโอจากสถานที่ขนส่งจริงๆ และปรับปรุงระบบ DeepSORT tracking ให้ทำงานได้ดีขึ้นในสภาพแวดล้อมที่ซับซ้อน

### การประเมินผลและเอกสาร

สร้างเมตริกการวัดประสิทธิภาพที่ชัดเจนและสามารถวัดได้ รวมถึงจัดทำเอกสารการใช้งานและ deployment guide ที่ครบถ้วน

---

**บทสรุป:** โปรเจกต์นี้เป็นการเรียนรู้ที่มีคุณค่าเกี่ยวกับความสำคัญของคุณภาพ dataset และกระบวนการ annotation ที่มีผลกระทบอย่างมีนัยสำคัญต่อประสิทธิภาพของโมเดล AI ประสบการณ์ที่ได้รับจะเป็นพื้นฐานสำคัญสำหรับการพัฒนาโปรเจกต์ AI ในอนาคต
